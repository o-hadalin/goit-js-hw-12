{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"46849808-268f228f7185f073a2d253586\";\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page,\n        per_page: perPage,\n      },\n    });\n    return { hits: response.data.hits, totalHits: response.data.totalHits };\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n    return { hits: [], totalHits: 0 };\n  }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderGallery(images, galleryElement) {\n  galleryElement.innerHTML = images.map(img => `\n    <a href=\"${img.largeImageURL}\">\n      <img src=\"${img.webformatURL}\" alt=\"${img.tags}\">\n      <div class=\"card-info\">\n        <div class=\"info-row\">\n          <span class=\"label\">Likes</span>\n          <span class=\"value\">${img.likes}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Views</span>\n          <span class=\"value\">${img.views}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Comments</span>\n          <span class=\"value\">${img.comments}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Downloads</span>\n          <span class=\"value\">${img.downloads}</span>\n        </div>\n      </div>\n    </a>\n  `).join(\"\");\n  \n  const lightbox = new SimpleLightbox(\"a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n  query = event.target.elements.query.value.trim();\n\n  if (!query) {\n    iziToast.warning({ message: \"Please enter a search term.\" });\n    return;\n  }\n\n  loader.classList.add(\"show\");\n  gallery.innerHTML = \"\";\n  loadMoreButton.style.display = \"none\";\n  page = 1;\n\n  fetchAndRenderImages();\n});\n\nloadMoreButton.addEventListener(\"click\", () => {\n  loadMoreButton.style.display = \"none\";\n  loader.classList.add(\"show\");\n  page += 1;\n  fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    const images = await fetchImages(query, page);\n    loader.classList.remove(\"show\");\n\n    if (page === 1) {\n      totalHits = images.totalHits;\n    }\n\n       if (images.hits.length > 0) {\n      renderGallery(images.hits, gallery);\n\n         if (page * 15 >= totalHits) {\n        iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n      } else {\n        loadMoreButton.style.display = \"block\";\n      }\n    } else if (page === 1) {\n      iziToast.error({ message: \"Sorry, there are no images matching your search query.\" });\n    }\n  } catch (error) {\n    loader.classList.remove(\"show\");\n    iziToast.error({ message: `An error occurred: ${error.message}. Please try again later.` });\n  }\n}"],"names":["URL","API_KEY","fetchImages","query","page","perPage","response","axios","error","renderGallery","images","galleryElement","img","SimpleLightbox","form","gallery","loader","loadMoreButton","totalHits","event","iziToast","fetchAndRenderImages"],"mappings":"+vBAEA,MAAMA,EAAM,2BACNC,EAAU,qCAEHC,EAAc,MAAOC,EAAOC,EAAO,EAAGC,EAAU,KAAO,CAClE,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIP,EAAK,CACpC,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,EACD,MAAO,CAAE,KAAMC,EAAS,KAAK,KAAM,UAAWA,EAAS,KAAK,UAC7D,OAAQE,EAAO,CACd,eAAQ,MAAM,uBAAwBA,CAAK,EACpC,CAAE,KAAM,CAAA,EAAI,UAAW,CAAC,CAChC,CACH,ECpBO,SAASC,EAAcC,EAAQC,EAAgB,CACpDA,EAAe,UAAYD,EAAO,IAAIE,GAAO;AAAA,eAChCA,EAAI,aAAa;AAAA,kBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,gCAIpBA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,gCAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,gCAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,gCAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,GAI1C,EAAE,KAAK,EAAE,EAEO,IAAIC,EAAe,IAAK,CACvC,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CC5BA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAId,EAAQ,GACRC,EAAO,EACPc,EAAY,EAEhBJ,EAAK,iBAAiB,SAAWK,GAAU,CAIzC,GAHAA,EAAM,eAAc,EACpBhB,EAAQgB,EAAM,OAAO,SAAS,MAAM,MAAM,OAEtC,CAAChB,EAAO,CACViB,EAAS,QAAQ,CAAE,QAAS,6BAA+B,CAAA,EAC3D,MACD,CAEDJ,EAAO,UAAU,IAAI,MAAM,EAC3BD,EAAQ,UAAY,GACpBE,EAAe,MAAM,QAAU,OAC/Bb,EAAO,EAEPiB,GACF,CAAC,EAEDJ,EAAe,iBAAiB,QAAS,IAAM,CAC7CA,EAAe,MAAM,QAAU,OAC/BD,EAAO,UAAU,IAAI,MAAM,EAC3BZ,GAAQ,EACRiB,GACF,CAAC,EAED,eAAeA,GAAuB,CACpC,GAAI,CACF,MAAMX,EAAS,MAAMR,EAAYC,EAAOC,CAAI,EAC5CY,EAAO,UAAU,OAAO,MAAM,EAE1BZ,IAAS,IACXc,EAAYR,EAAO,WAGdA,EAAO,KAAK,OAAS,GAC1BD,EAAcC,EAAO,KAAMK,CAAO,EAE3BX,EAAO,IAAMc,EAClBE,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,EAEvFH,EAAe,MAAM,QAAU,SAExBb,IAAS,GAClBgB,EAAS,MAAM,CAAE,QAAS,wDAA0D,CAAA,CAEvF,OAAQZ,EAAO,CACdQ,EAAO,UAAU,OAAO,MAAM,EAC9BI,EAAS,MAAM,CAAE,QAAS,sBAAsBZ,EAAM,OAAO,2BAA2B,CAAE,CAC3F,CACH"}
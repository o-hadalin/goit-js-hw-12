{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"46849808-268f228f7185f073a2d253586\";\n\nexport const fetchImages = async (query, page = 1, perPage = 15) => {\n  try {\n    const response = await axios.get(URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page,\n        per_page: perPage,\n      },\n    });\n    return { hits: response.data.hits, totalHits: response.data.totalHits };\n  } catch (error) {\n    console.error(\"Error fetching data:\", error);\n    return { hits: [], totalHits: 0 };\n  }\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderGallery(images, galleryElement) {\n  galleryElement.insertAdjacentHTML(\"beforeend\", images.map(img => `\n    <a href=\"${img.largeImageURL}\">\n      <img src=\"${img.webformatURL}\" alt=\"${img.tags}\">\n      <div class=\"card-info\">\n        <div class=\"info-row\">\n          <span class=\"label\">Likes</span>\n          <span class=\"value\">${img.likes}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Views</span>\n          <span class=\"value\">${img.views}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Comments</span>\n          <span class=\"value\">${img.comments}</span>\n        </div>\n        <div class=\"info-row\">\n          <span class=\"label\">Downloads</span>\n          <span class=\"value\">${img.downloads}</span>\n        </div>\n      </div>\n    </a>\n  `).join(\"\"));\n\n  const lightbox = new SimpleLightbox(\"a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n}\n","import { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery } from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\"form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreButton = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nlet totalHits = 0;\n\nfunction toggleLoadingState(isLoading) {\n  loader.classList.toggle(\"show\", isLoading);\n  loadMoreButton.style.display = isLoading ? \"none\" : \"block\";\n}\n\nform.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n  query = event.target.elements.query.value.trim();\n\n  if (!query) {\n    iziToast.warning({ message: \"Please enter a search term.\" });\n    return;\n  }\n\n  gallery.innerHTML = \"\";\n  page = 1;\n  toggleLoadingState(true);\n  fetchAndRenderImages();\n});\n\nloadMoreButton.addEventListener(\"click\", () => {\n  page += 1;\n  toggleLoadingState(true);\n  fetchAndRenderImages();\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    const images = await fetchImages(query, page);\n    toggleLoadingState(false);\n\n    if (page === 1) totalHits = images.totalHits;\n\n    if (images.hits.length > 0) {\n      renderGallery(images.hits, gallery);\n\n      loadMoreButton.style.display = (page * 15 < totalHits) ? \"block\" : \"none\";\n      if (page * 15 >= totalHits) {\n        iziToast.info({ message: \"We're sorry, but you've reached the end of search results.\" });\n      }\n\n      if (page > 1) {\n        const card = gallery.querySelector(\".gallery a\");\n        const cardHeight = card ? card.getBoundingClientRect().height : 0;\n        window.scrollBy({ top: cardHeight * 2, behavior: \"smooth\" });\n      }\n    } else if (page === 1) {\n      iziToast.error({ message: \"Sorry, there are no images matching your search query.\" });\n    }\n  } catch (error) {\n    toggleLoadingState(false);\n    iziToast.error({ message: `An error occurred: ${error.message}. Please try again later.` });\n  }\n}\n"],"names":["URL","API_KEY","fetchImages","query","page","perPage","response","axios","error","renderGallery","images","galleryElement","img","SimpleLightbox","form","gallery","loader","loadMoreButton","totalHits","toggleLoadingState","isLoading","event","iziToast","fetchAndRenderImages","card","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAM,2BACNC,EAAU,qCAEHC,EAAc,MAAOC,EAAOC,EAAO,EAAGC,EAAU,KAAO,CAClE,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIP,EAAK,CACpC,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAUC,CACX,CACP,CAAK,EACD,MAAO,CAAE,KAAMC,EAAS,KAAK,KAAM,UAAWA,EAAS,KAAK,UAC7D,OAAQE,EAAO,CACd,eAAQ,MAAM,uBAAwBA,CAAK,EACpC,CAAE,KAAM,CAAA,EAAI,UAAW,CAAC,CAChC,CACH,ECpBO,SAASC,EAAcC,EAAQC,EAAgB,CACpDA,EAAe,mBAAmB,YAAaD,EAAO,IAAIE,GAAO;AAAA,eACpDA,EAAI,aAAa;AAAA,kBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,gCAIpBA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,gCAITA,EAAI,KAAK;AAAA;AAAA;AAAA;AAAA,gCAITA,EAAI,QAAQ;AAAA;AAAA;AAAA;AAAA,gCAIZA,EAAI,SAAS;AAAA;AAAA;AAAA;AAAA,GAI1C,EAAE,KAAK,EAAE,CAAC,EAEM,IAAIC,EAAe,IAAK,CACvC,aAAc,MACd,aAAc,GAClB,CAAG,EACQ,QAAO,CAClB,CC5BA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAiB,SAAS,cAAc,YAAY,EAE1D,IAAId,EAAQ,GACRC,EAAO,EACPc,EAAY,EAEhB,SAASC,EAAmBC,EAAW,CACrCJ,EAAO,UAAU,OAAO,OAAQI,CAAS,EACzCH,EAAe,MAAM,QAAUG,EAAY,OAAS,OACtD,CAEAN,EAAK,iBAAiB,SAAWO,GAAU,CAIzC,GAHAA,EAAM,eAAc,EACpBlB,EAAQkB,EAAM,OAAO,SAAS,MAAM,MAAM,OAEtC,CAAClB,EAAO,CACVmB,EAAS,QAAQ,CAAE,QAAS,6BAA+B,CAAA,EAC3D,MACD,CAEDP,EAAQ,UAAY,GACpBX,EAAO,EACPe,EAAmB,EAAI,EACvBI,GACF,CAAC,EAEDN,EAAe,iBAAiB,QAAS,IAAM,CAC7Cb,GAAQ,EACRe,EAAmB,EAAI,EACvBI,GACF,CAAC,EAED,eAAeA,GAAuB,CACpC,GAAI,CACF,MAAMb,EAAS,MAAMR,EAAYC,EAAOC,CAAI,EAK5C,GAJAe,EAAmB,EAAK,EAEpBf,IAAS,IAAGc,EAAYR,EAAO,WAE/BA,EAAO,KAAK,OAAS,GAQvB,GAPAD,EAAcC,EAAO,KAAMK,CAAO,EAElCE,EAAe,MAAM,QAAWb,EAAO,GAAKc,EAAa,QAAU,OAC/Dd,EAAO,IAAMc,GACfI,EAAS,KAAK,CAAE,QAAS,4DAA8D,CAAA,EAGrFlB,EAAO,EAAG,CACZ,MAAMoB,EAAOT,EAAQ,cAAc,YAAY,EACzCU,EAAaD,EAAOA,EAAK,sBAAuB,EAAC,OAAS,EAChE,OAAO,SAAS,CAAE,IAAKC,EAAa,EAAG,SAAU,QAAQ,CAAE,CAC5D,OACQrB,IAAS,GAClBkB,EAAS,MAAM,CAAE,QAAS,wDAA0D,CAAA,CAEvF,OAAQd,EAAO,CACdW,EAAmB,EAAK,EACxBG,EAAS,MAAM,CAAE,QAAS,sBAAsBd,EAAM,OAAO,2BAA2B,CAAE,CAC3F,CACH"}